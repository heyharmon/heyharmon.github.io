<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Personalization Demo | BloomCU</title>
    <!-- BloomIO Chatbot Stylesheet -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- BloomIO Demo Stylesheet -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Emoji Stylesheet -->
    <link rel="stylesheet" href="../assets/css/emoji.css" >
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
  </head>
  <body>

    <!-- Chatbot -->
    <div id="chatbox" class="show">
      <div class="header-buttons">
        <div id="hide-chatbox-btn" class="header-button"></div>
      </div>

      <div id="profile" class="chat-jumbo" style="height: 80px;">
          <img src="../assets/img/chip-avatar.jpg" />
          <p>Chip <span>Online</span></p>
      </div>

      <div id="output-area"></div>
    </div>

    <div id="toggle-chatbox-btn" class="show">
      <div id="toggle-chatbox-btn-icon"></div>
    </div>

    <script>
      /**
       * SHOW/HIDE CHATBOX
       *
       */

      // DOM refs
      var chatBox = document.getElementById('chatbox'),
          toggleChatboxBtn = document.getElementById('toggle-chatbox-btn'),
          hideChatboxBtn = document.getElementById('hide-chatbox-btn'),
          windowBody = document.body;

      // https://youmightnotneedjquery.com/#add_class
      function addClass(el, className) {
        if (el.classList) { el.classList.add(className); }
        else { el.className += ' ' + className; }
      }

      // https://youmightnotneedjquery.com/#remove_class
      function removeClass(el, className) {
        if (el.classList) { el.classList.remove(className); }
        else { el.className = el.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' '); }
      }

      // Check for class
      function hasClass(element, cls) {
        return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;
      }

      // Remove Chatbox
      function removeChatBox() {
        /* Hide chatbox */
        removeClass(chatBox, 'show');
        /* Change toggle btn icon */
        removeClass(toggleChatboxBtn, 'show');
        /* Remove toggle class from body */
        removeClass(windowBody, 'chatbox-open');
      }

      // Toggle Chatbox
      function toggleChatBox() {
        if (hasClass(chatBox, 'show') == true) {
          /* Hide chatbox */
          removeClass(chatBox, 'show');
          /* Change toggle btn icon */
          removeClass(toggleChatboxBtn, 'show');
          /* Remove toggle class from body */
          removeClass(windowBody, 'chatbox-open');
        } else {
          /* Show chatbox */
          addClass(chatBox, 'show');
          /* Change toggle btn icon */
          addClass(toggleChatboxBtn, 'show');
          /* Add toggle class to body */
          addClass(windowBody, 'chatbox-open');
        }
      }

      // Attach the click handler to fab and hide button when the page loads.
      window.addEventListener('load', function() {
        /* Add toggle class to body */
        addClass(windowBody, 'chatbox-open');
        /* Listen to toggle buttons */
        toggleChatboxBtn.addEventListener('click', toggleChatBox);
        hideChatboxBtn.addEventListener('click', removeChatBox);
      });

      console.log('Hello world.');
    </script>
    <!-- /Chatbot -->

    <!-- Google Tag Manager -->
    <!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5CRW4D"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5CRW4D');</script> -->
    <!-- End Google Tag Manager -->

    <!-- Demo Navbar -->
    <nav class="navbar navbar-static-top navbar-default navbar-demo navbar-fixed-top">
      <div class="container-fluid">

        <div class="navbar-header">
          <a class="navbar-brand" href="index.html">
            <img src="../assets/img/bloomcu-personalization-logo-light.png" alt="BloomCU Personalization Logo">
          </a>
        </div>

        <div id="personalization-navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://bloomcu.com/persona" target="_blank">Back to BloomCU.com</a></li>
            <li><a href="restart.html">Restart Demo</a></li>
          </ul>
        </div>

      </div>
    </nav>

    <!-- ACME Navbar -->
    <nav class="navbar navbar-static-top navbar-default navbar-acme">
      <div class="container">

        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bloomcu-navbar-collapse" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">
            <img src="../assets/img/acme-logo-dark.png" alt="BloomCU Logo">
          </a>
        </div>

        <div id="bloomcu-navbar-collapse" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="index.html">Home</a></li>
            <li><a href="loans.html">Auto Loans</a></li>
            <li><a href="membership.html">Membership</a></li>
            <li class="mobile-demo-link"><a href="https://bloomcu.com/persona" target="_blank">Back to BloomCU.com</a></li>
            <li class="mobile-demo-link"><a href="restart.html">Restart Demo</a></li>
          </ul>
        </div>

      </div><!-- /.container -->
    </nav><!-- /.navbar -->

    <div class="jumbotron" id="home-jumbotron">
      <div class="container">
        <h1>Welcome to <br/>Acme Credit Union</h1>
        <p>Acme CU is the best fake credit union in the world! No joke.</p>
      </div><!-- /.containter -->
    </div><!-- /.jumbotron -->

    <div class="container">
      <div class="row">

        <div class="col-xs-8">
          <div class="col-sm-6 col-xs-12">
            <h2>Auto Loans</h2>
            <p>We don’t give real auto loans because we’re not a real credit union, but if we did give auto loans our rates would be really, really awesome.</p>
            <br/>
            <a class="btn btn-default btn-lg" href="loans.html" role="button">View Auto Loans</a>
            <br/><br/><br/>
          </div>

          <div class="col-sm-6 col-xs-12">
            <h2>Membership</h2>
            <p>No one has asked to join our fake credit union, but you could be the first! Just <a href="https://bloomcu.com/contact-us/" target="_blank">contact us</a> and say you would like a fake membership and we’ll email you a gold star.</p>
            <br/>
            <a class="btn btn-default btn-lg" href="membership.html" role="button">Become a Member</a>
            <br/><br/><br/>
         </div>
        </div>

      </div><!--/.row-->
    </div><!--/.container-->

    <footer>
    </footer>

    <!-- BloomIO Personalization -->
    <script src="js/personalization.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>

    <!-- BloomIO Javascript Modules
    ================================================== -->
    <!-- Firebase -->
    <script src='https://cdn.firebase.com/js/client/1.1.1/firebase.js'></script>
    <!-- BloomIO Analytics -->
    <!-- <script src="../assets/js/analytics.js"></script> -->

    <!-- Pandorabots API -->
    <!-- <script src="../vendor/pandorabots/talk.js"></script> -->

    <!-- BloomIO Demo chat -->
    <!-- <script src="js/demo-chat.js"></script> -->

    <!-- Page Specific Chat Sequence -->
    <script>
    console.info('groupCookie = ', groupCookie);
    console.info('stageOneCompleted = ', stageOneCompleted);
    console.info('demoCompleteCookie = ', demoCompleteCookie);
    console.info('firstNameCookie = ', firstNameCookie);

    var botAvatar = "https://firebasestorage.googleapis.com/v0/b/bloomchat-5987d.appspot.com/o/clients%2Fbloomcu%2Fmedia%2Fbot-avatar.jpg?alt=media&token=db67be0f-423c-431c-b91d-3288083bfc35",
       output_area = document.getElementById("output-area"),
       chat_area = output_area.innerHTML;

    /**
     * Demo Step 1
     *
     */
    if (demoCompleteCookie != 1 && stageOneCompleted != 1) {
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 50);
      // Bubble 1 SM
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          Hi! Welcome to BloomCU’s personalization demo!</div></div>`);

          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 2300);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 2600);
      // Bubble 2 MD
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          My name is Chip and I’m the brain of this website.</div></div>`);

          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 7600);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 7900);
      // Bubble 3 SM
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          What is your name?

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 9900);
      // Bubble 4
      setTimeout(function() {
          output_area.innerHTML = output_area.innerHTML + (`
            <div id="profile" class="chat-input">
                <p>What is your first name?</p>
                <input id="user-first-name-input" type="text" onkeydown="if (event.keyCode == 13) { doFirstName(); }" placeholder="My first name is..." autocomplete="off" />
            </div>
            `);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 10000);
    } // End if

    /**
     *
     * After visiting AUTO LOAN page
     */
     if (groupCookie == 1 && stageOneCompleted == 1) {
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 1);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          Ta-da! <i class="em em-tada"></i>

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 1200);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 2000);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          I just dynamically personalized the homepage content for you because you’re interested in auto loans!

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 4000);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 7000);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          Personalization is cool because more relevant experiences for individual users increases engagement

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 9400);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 17400);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          As you visit the other pages on this site, I'll dynamically personalize the homepage banner.

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 20000);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 26000);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          If you think personalization is awesome and you want to be my friend, you should talk with my human creators at <a href="https://bloomcu.com/contact-us/" target="_blank">BloomCU</a>.

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 29000);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 42000);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          When I'm older and wiser, I'll be able to talk with people about auto loans and answer their questions!

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 45000);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 52000);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          Thanks for viewing BloomCU's personalization demo! If you want to learn more about personalization, <a href="https://bloomcu.com/contact-us/" target="_blank">contact us</a>. You can also <a href="restart.html">restart this demo</a>.

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 55000);
            // Set demo completion Cookie
            setTimeout(function() {
                createCookie('bloomio_demo_complete','1',30)
            }, 56000);

    } // End if

    /**
     *
     * After visiting MEMBERSHIP page (cookie 2)
     */
     if (groupCookie == 2 && stageOneCompleted == 1) {
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 1);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          Ta-da! <i class="em em-tada"></i>

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 1200);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 2000);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          I just dynamically personalized the homepage content for you because you’re interested in becoming a member!

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 4000);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 7000);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          Personalization is cool because more relevant experiences for individual users increases engagement

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 9400);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 17400);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          As you visit the other pages on this site, I'll dynamically personalize the homepage banner.

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 20000);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 26000);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          If you think personalization is awesome and you want to be my friend, you should talk with my human creators at <a href="https://bloomcu.com/contact-us/" target="_blank">BloomCU</a>.

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 29000);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 42000);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          When I'm older and wiser, I'll be able to talk with people about membership, auto loans and answer their questions!

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 45000);
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 52000);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          Thanks for viewing BloomCU's personalization demo! If you want to learn more about personalization, <a href="https://bloomcu.com/contact-us/" target="_blank">contact us</a>. You can also <a href="restart.html">restart this demo</a>.

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 55000);
            // Set demo completion Cookie
            setTimeout(function() {
                createCookie('bloomio_demo_complete','1',30)
            }, 56000);

    } // End if

    /**
     * Demo COMPLETE (cookie 3)
     *
     */
     if (demoCompleteCookie == 1) {
            // Typing
            setTimeout(function() {
                output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                var afterBotResponse = document.getElementById("output-area");
                afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            }, 1);
      setTimeout(function() {
        document.getElementById("typing").remove();
          output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

          Thanks for viewing BloomCU's personalization demo! If you want to learn more about personalization, <a href="https://bloomcu.com/contact-us/" target="_blank">contact us</a>. You can also <a href="restart.html">restart this demo</a>.

          </div></div>`);
          var afterBotResponse = document.getElementById("output-area");
          afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
      }, 1200);

    } // End if

    /**
     * doFirstName
     * Save users first name to cookie & firebase
     */
    function doFirstName() {

        // Grab name from input field
        var user_first_name_input = document.getElementById("user-first-name-input").value;

        // Remove focus from input (iOS)
        document.getElementById("user-first-name-input").blur();

        // Remove input field
        document.getElementById("user-first-name-input").remove();

        // Store name in cookie
        createCookie('bloomio_first_name',user_first_name_input,30)
        // Name Cookie
        var firstNameCookie = document.cookie.replace(/(?:(?:^|.*;\s*)bloomio_first_name\s*\=\s*([^;]*).*$)|^.*$/, "$1");
        console.info('Cookie Created: firstNameCookie = ', firstNameCookie);

        // Output users name to chat
        output_area.innerHTML = output_area.innerHTML + (`<div class="message right"><div class="bubble">My name is ${firstNameCookie}</div></div>`);
        var afterUserInput = document.getElementById("output-area");
        afterUserInput.scrollTop = afterUserInput.scrollHeight;

        // Save users first name to Firebase
        // var deviceFirstNameRef = devicesRef.child(bloomio_user_device);
        // deviceFirstNameRef.update({
        //     first_name: firstNameCookie
        // });

        /**
         * Demo Step 2
         *
         */
        // Typing
        setTimeout(function() {
            output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 1);
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            Nice to meet you, ${firstNameCookie}!

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 1900);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 4000);
        // Bubble 7 LG
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            In this demo I’m going to show you how I dynamically personalize content for my website users.

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 9000);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 13000);
        // Bubble 8 SM
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            What is dynamic personalization? Here's an explanation:

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 18000);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 20000);
        // Bubble 9 LG
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            Dynamic personalization means that I change website content for individual users based on their interests--on the fly, automagically. <i class="em em-heart_eyes"></i>

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 27000);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 34000);
        // Bubble 10 LG
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            Personalization is cool because users are more likely to interact with content that’s highly relevant to them.

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 39000);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 46000);
        // Bubble 11 MD
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            At the end of the day, personalization helps credit unions get more members and borrowers.

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 49500);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 54000);
        // Bubble 12 MD
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            Plus, personalization makes you a marketing rockstar.

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 59000);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 64500);
        // Bubble 13 LG
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            <img src="img/tonya_gail_kiss.jpg" height="253" width="188">

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight + "200px";
        }, 70000);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 70000);
        // Bubble 14 LG
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            (This is one of BloomCU’s actual clients. She loves KISS, so we sent her some Starchild gear to wear at the office. <i class="em em-wink"></i>)

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 84000);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 87000);
        // Bubble 15 MD
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            Let me show you how dynamic personalization works.

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 92000);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 95000);
        // Bubble 16 SM
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            Let’s pretend you want to get an auto loan.

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 98500);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 111000);
        // Bubble 17 MD
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            Notice that my homepage banner says nothing about auto loans.

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 115000);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 120000);
        // Bubble 18 SM
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            That’s about to change.

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
        }, 125500);
              // Typing
              setTimeout(function() {
                  output_area.innerHTML = output_area.innerHTML + (`<div id="typing" class="message"><img src="${botAvatar}"><div class="bubble"><div class="bouncer one"></div><div class="bouncer two"></div><div class="bouncer three"></div></div>`);
                  var afterBotResponse = document.getElementById("output-area");
                  afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
              }, 128000);
        // Bubble 19 MD
        setTimeout(function() {
          document.getElementById("typing").remove();
            output_area.innerHTML = output_area.innerHTML + (`<div class="message"><img src="${botAvatar}"><div class="bubble">

            ${firstNameCookie}, go to the <a href="loans.html">Auto Loan Page</a>.

            </div></div>`);
            var afterBotResponse = document.getElementById("output-area");
            afterBotResponse.scrollTop = afterBotResponse.scrollHeight;
            // stageOneCompleted = 1
            createCookie('bloomio_stage_one_complete', 1,30)
            console.log('bloomio_stage_one_complete set to=', 1)
        }, 133000);

    };
    </script>

  </body>
</html>
